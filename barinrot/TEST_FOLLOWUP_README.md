# מדריך לבדיקת פולואו אפ 🧪

## סקריפטים זמינים

### 1. `test_followup_live.js` - הסקריפט הישן (פשוט)
סקריפט בסיסי לבדיקת פולואו אפ עם הודעות קבועות.

**שימוש:**
```bash
node test_followup_live.js 0501234567
```

**תכונות:**
- הודעות פשוטות וקבועות
- GIF בהודעה 2
- שולח 10 הודעות ברצף
- טוב לבדיקות בסיסיות

---

### 2. `test_followup_current.js` - ✨ הסקריפט החדש (מתקדם)
סקריפט מלא שמתאים למערכת הפולואו אפ הנוכחית במערכת.

**שימוש:**

```bash
# הודעה בודדת
node test_followup_current.js 0501234567 1

# הודעה ספציפית (למשל 4)
node test_followup_current.js 0501234567 4

# רצף הודעות (1-10)
node test_followup_current.js 0501234567 1-10

# רצף הודעות (3-7)
node test_followup_current.js 0501234567 3-7
```

**תכונות מתקדמות:**

#### 🎯 הודעות מותאמות אישית
- **הודעה 1**: מותאמת לשלב השיחה:
  - `waiting_for_decision` - "חשבת על האימונים?"
  - `waiting_for_payment` - "קיבלת קישור לתשלום?"
  - `stopped_responding` - "מה קרה?"
  
- **הודעה 2**: GIF
  
- **הודעה 3**: הודעות קצרות - "עדיין רלוונטי?"
  
- **הודעה 4**: הודעה אישית עם התייחסות לנקודות כאב:
  - ביטחון עצמי
  - לחץ ועצבים
  - אנרגיות עודפות
  - בריונות
  
- **הודעה 5**: FOMO - "לא כדאי לפספס"
  
- **הודעה 6+**: הצעת ערך אמיתי

#### 👨‍👧‍👦 תמיכה בהורים לילדים
- זיהוי אוטומטי אם זה הורה
- שימוש בשם הילד
- הודעות מותאמות למצב משפחתי

#### 🧠 אינטגרציה עם סיכומי שיחה
- טוען את סיכום השיחה מה-DB
- מתאים את ההודעה לפי:
  - נקודות כאב שהוזכרו
  - מוטיבציות הלקוח
  - שלב השיחה
  - נושא אחרון שדיברו עליו

#### 📊 מידע מפורט בזמן הבדיקה
```
📱 מספר טלפון: 972501234567
👤 שם לקוח: רועי
📊 נמצא סיכום שיחה:
   - שלב: waiting_for_decision
   - נקודות כאב: חוסר ביטחון עצמי, לחץ בעבודה
   - הורה לילד: לא
```

---

## השוואה מהירה

| תכונה | test_followup_live.js | test_followup_current.js |
|-------|----------------------|-------------------------|
| הודעות בסיסיות | ✅ | ✅ |
| GIF בהודעה 2 | ✅ | ✅ |
| הודעות מותאמות אישית | ❌ | ✅ |
| סיכומי שיחה | ❌ | ✅ |
| נקודות כאב | ❌ | ✅ |
| הורים לילדים | ❌ | ✅ |
| שלבי שיחה | ❌ | ✅ |
| רצף גמיש | רק 1-10 | כל רצף |
| הודעה בודדת | ❌ | ✅ |

---

## דוגמאות שימוש

### בדיקת הודעה ראשונה
```bash
node test_followup_current.js 0501234567 1
```
תראה איך ההודעה הראשונה מותאמת לשלב השיחה.

### בדיקת הודעה אישית (4)
```bash
node test_followup_current.js 0501234567 4
```
תראה איך ההודעה מתייחסת לנקודות כאב ספציפיות.

### בדיקת FOMO (5)
```bash
node test_followup_current.js 0501234567 5
```
תראה את הודעת ה-FOMO המותאמת אישית.

### בדיקת רצף שלם
```bash
node test_followup_current.js 0501234567 1-10
```
תראה את כל הרצף כפי שהלקוח יראה אותו במערכת האמיתית.

---

## טיפים

### 💡 לבדיקת לקוח חדש בלי סיכום
הסקריפט יזהה אוטומטית שאין סיכום וישלח הודעות ברירת מחדל.

### 💡 לבדיקת לקוח עם סיכום
הסקריפט יטען את הסיכום מה-DB וישתמש בו ליצירת הודעות מותאמות.

### 💡 לבדיקת הורה עבור ילד
וודא שיש סיכום שיחה עם `isParentForChild: true` ו-`child_name`.

### 💡 לבדיקת נקודות כאב ספציפיות
בדוק הודעות 4-5 שמתייחסות לנקודות הכאב מהסיכום.

---

## פתרון בעיות

### ❌ "לקוח לא נמצא ב-DB"
הלקוח לא קיים במסד הנתונים. הוסף אותו או השתמש במספר קיים.

### ❌ "קובץ GIF לא נמצא"
וודא שקובץ `followUp.gif` נמצא בתיקייה הראשית.

### ⚠️ "אין סיכום שיחה"
זה תקין - הסקריפט ישתמש בהודעות ברירת מחדל.

---

## המלצות

1. **התחל בהודעה בודדת (1)** כדי לראות את ההתאמה האישית
2. **בדוק הודעה 4** כדי לראות איך נקודות הכאב עובדות
3. **בדוק רצף 1-5** כדי לראות את כל הלוגיקה
4. **השתמש ב-test_followup_current.js** לכל הבדיקות המתקדמות
5. **השתמש ב-test_followup_live.js** רק לבדיקות בסיסיות מהירות

---

**🔥 הסקריפט החדש `test_followup_current.js` מומלץ לשימוש קבוע!**



